
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head><meta xmlns="http://www.w3.org/1999/xhtml" name="description" content="Track+ sends e-mails to notify users of changes to items or remind them of due dates. You can customize the appearance and content of these e-mails using templates. To add or edit e-mail templates go ..."/><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta name="copyright" content="(C) Copyright 2005"/><meta name="DC.rights.owner" content="(C) Copyright 2005"/><meta name="DC.Type" content="concept"/><meta name="DC.Title" content="Managing e-mail templates"/><meta name="abstract" content="Track+ sends e-mails to notify users of changes to items or remind them of due dates. You can customize the appearance and content of these e-mails using templates."/><meta xmlns="http://www.w3.org/1999/xhtml" name="description" content="Track+ sends e-mails to notify users of changes to items or remind them of due dates. You can customize the appearance and content of these e-mails using templates."/><meta name="indexterms" content="e-mail template, customize, e-mail template, template, e-mail"/><meta name="DC.subject" content="e-mail template, customize, e-mail template, template, e-mail"/><meta name="keywords" content="e-mail template, customize, e-mail template, template, e-mail"/><meta name="DC.Relation" scheme="URI" content="../../../Topics/05ForConfigManagers/Chapter5Wrapper.html"/><meta name="DC.Creator" content="Steinbeis Technical Documentation"/><meta name="DC.Format" content="XHTML"/><meta name="DC.Identifier" content="id132LE400AST"/><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>Managing e-mail templates</title><meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Type" content="text/html; charset=utf-8"><!----></meta><link xmlns="http://www.w3.org/1999/xhtml" rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/commonltr.css"><!----></link><link xmlns="http://www.w3.org/1999/xhtml" rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript"><!--
          
          var prefix = "../../../index.html";
          
          --></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" charset="utf-8" src="../../../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" id="id132LE400AST">
<table class="nav"><tbody><tr><td colspan="2"><div id="permalink"><a href="#">Link to this page</a></div><div id="printlink"><a href="javascript:window.print();">Print this page</a></div></td></tr><tr><td><div class="navheader">
<span class="navparent"><a class="link" href="../../../Topics/05ForConfigManagers/Chapter5Wrapper.html" title="Customizing Track+"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Customizing Track+</span></a></span>  </div></td><td width="75%"><a class="navheader_parent_path" href="../../../Topics/05ForConfigManagers/Chapter5Wrapper.html" title="Customizing Track+">Customizing Track+</a></td></tr></tbody></table>

	<h1 class="title topictitle1">Managing e-mail templates</h1>

	
	
	<div class="body conbody"><p class="shortdesc"><span class="ph"><span class="ph">Track+</span></span> sends e-mails to notify users of changes to items or
		remind them of due dates. You can customize the appearance and content
		of these e-mails using templates.</p>

		<p class="p">To add or edit e-mail templates go to <span class="ph menucascade"><span class="ph uicontrol">Administration</span> &gt; <span class="ph uicontrol">Customize</span> &gt; <span class="ph uicontrol">E-mail templates</span></span>.</p>

		<div class="fig fignone"><br/><div class="imagecenter"><img class="image imagecenter" id="id132LE400AST__image_bkf_k2r_kk" src="figures/mailTemplate1.png" height="290" width="365"/></div><br/>
			
			<div class="p">You will see the standard e-mail templates that come with <span class="ph"><span class="ph">Track+</span></span>.
				There are a number of predefined events that trigger e-mails.
				These are<ul class="ul" id="id132LE400AST__ul_sp2_g3r_kk">
					<li class="li">Create item</li>

					<li class="li">Modify item, like edit or move</li>

					<li class="li">Change budget or planned values of an item</li>

					<li class="li">Add a comment</li>

				</ul>
</div>

			<div class="p">Furthermore, there are a number of system events that trigger
				e-mail. These are<ul class="ul" id="id132LE400AST__ul_d1n_v3r_kk">
					<li class="li">Welcoming a new user after he has registered</li>

					<li class="li">Forgot password e-mail</li>

					<li class="li">Reminder e-mail of due or overdue tasks</li>

				</ul>
</div>

			<p class="p">You assign templates either globally, or specific for an item
				type, or workspace type, or even workspace specific by dragging
				it from the right area to the desired position in the second
				column.</p>

			<p class="p">Each template comes in two variants: HTML and plain text. Each
				template can be provided in a number of locales. You can import
				and export complete template sets or just single templates.</p>

		</div>

		<div class="fig fignone"><br/><div class="imagecenter"><img class="image imagecenter" id="id132LE400AST__image_zwf_l2r_kk" src="figures/mailTemplate2.png" height="124" width="429"/></div><br/>
			
		</div>

		<div class="fig fignone"><br/><div class="imagecenter"><img class="image imagecenter" id="id132LE400AST__image_m3z_pkr_kk" src="figures/mailTemplate3.png" height="307" width="409"/></div><br/>
			
		</div>

		<p class="p">Templates are written in the Freemarker macro language (<a class="xref" href="http://freemarker.sourceforge.net/" target="_blank">http://freemarker.sourceforge.net/</a>). The following listing shows a part of the
			standard item changed e-mail HTML template as it comes with
			<span class="ph"><span class="ph">Track+</span></span>.</p>

		<pre class="pre codeblock">
 &lt;#macro renderShortFields fieldChangeRows&gt;     
  &lt;#list fieldChangeRows as fieldChange&gt;
   &lt;tr&gt;
       &lt;td align="right" bgcolor="#d8e1ed" 
              style="width: 26%;"&gt;
              ${fieldChange.localizedFieldLabel}:
       &lt;/td&gt;
       &lt;#-- if copy we are not interested in the 
           change compared to the original workItem --&gt;
       &lt;#if !fieldChange.changed&gt;
        &lt;#assign bgcolor=bgcolorCellNormal&gt;		          	
       &lt;#else&gt;
		&lt;#assign bgcolor=bgcolorCellChanged&gt;		        	
       &lt;/#if&gt;
       &lt;td bgcolor="${bgcolor}" style="width: 37%;"&gt;
       ${fieldChange.newShowValue}
       &lt;/td&gt;
       &lt;td bgcolor="#edf0f6" style="width: 37%;"&gt;
       ${fieldChange.oldShowValue}
       &lt;/td&gt;
      &lt;/tr&gt;	     
  &lt;/#list&gt;
&lt;/#macro&gt;
</pre>

		<p class="p">The template engine gets a number of variables which it can render to
			the template. The most import variable is
				<var class="keyword varname">fieldChangeRows</var>. It contains entries with an
			item property label, the new property value, the old property
			value, and an indication of whether the value has changed. The
			resulting e-mail looks like shown below.</p>

		<div class="fig fignone"><br/><div class="imagecenter"><img class="image imagecenter" id="id132LE400AST__image_xhv_lkr_kk" src="figures/mailTemplate4.png" height="259" width="367"/></div><br/>
			
		</div>

		<p class="p">The following properties are available:</p>

		<table cellpadding="4" cellspacing="0" summary="" id="id132LE400AST__simpletable_sqw_lmr_kk" border="0" class="simpletable"><tr class="sthead">
				<th valign="bottom" align="left" id="d44712e146" class="stentry" width="50%">Variable</th>

				<th valign="bottom" align="left" id="d44712e149" class="stentry" width="50%">Description</th>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry">title</td>

				<td valign="top" headers="d44712e149" class="stentry">The item title</td>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry">project</td>

				<td valign="top" headers="d44712e149" class="stentry">The space or project for this item</td>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry">itemNo</td>

				<td valign="top" headers="d44712e149" class="stentry">the item number</td>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry">marker</td>

				<td valign="top" headers="d44712e149" class="stentry">default is [<span class="ph"><span class="ph">Track+</span></span> &lt;item number&gt;]</td>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry">submitterEmail</td>

				<td valign="top" headers="d44712e149" class="stentry">The e-mail of the submitter when item was created by e-mail or when it was entered by
					another user</td>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry">subject</td>

				<td valign="top" headers="d44712e149" class="stentry">default is ${marker}[${{project}] ${changeDetail}</td>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry">changeDetail</td>

				<td valign="top" headers="d44712e149" class="stentry">A localized text string as described in the code below</td>

			</tr>
<tr class="strow"/>
<tr class="strow"/>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry">moreInfo</td>

				<td valign="top" headers="d44712e149" class="stentry">The link to the item within the <span class="ph"><span class="ph">Track+</span></span>
					system</td>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry"> </td>

				<td valign="top" headers="d44712e149" class="stentry"> </td>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry">isCreated</td>

				<td valign="top" headers="d44712e149" class="stentry">true, if this item was just created</td>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry">isCopy</td>

				<td valign="top" headers="d44712e149" class="stentry">true if this item was just copied</td>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry">oldIssue</td>

				<td valign="top" headers="d44712e149" class="stentry">only in case of copy: the original item
					number</td>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry">isAddComment</td>

				<td valign="top" headers="d44712e149" class="stentry">true if a comment was added</td>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry">isEditComment</td>

				<td valign="top" headers="d44712e149" class="stentry">true if a comment was edited</td>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry">isDeleteComment</td>

				<td valign="top" headers="d44712e149" class="stentry">true if a comment was deleted</td>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry">isOtherChanged</td>

				<td valign="top" headers="d44712e149" class="stentry">true for any change that was not specified more
					eexplicitly</td>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry">isManagerChanged</td>

				<td valign="top" headers="d44712e149" class="stentry">true if the manager was changed</td>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry">isResponsibleChanged</td>

				<td valign="top" headers="d44712e149" class="stentry">true if the responsible was changed</td>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry">isDateChanged</td>

				<td valign="top" headers="d44712e149" class="stentry">true if the start or end date was changed</td>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry">isMove</td>

				<td valign="top" headers="d44712e149" class="stentry">true if the item was moved to a new item type or
					space</td>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry">isStateChanged</td>

				<td valign="top" headers="d44712e149" class="stentry">true if the item state was changed</td>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry">isResponsibleChanged</td>

				<td valign="top" headers="d44712e149" class="stentry">true if the respsonsible was changed</td>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry">isClose</td>

				<td valign="top" headers="d44712e149" class="stentry">true if the item was closed</td>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry">isReopen</td>

				<td valign="top" headers="d44712e149" class="stentry">true if a closed item was reopened</td>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry">changedBy</td>

				<td valign="top" headers="d44712e149" class="stentry">the person causing the e-mail event</td>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry">createdBy</td>

				<td valign="top" headers="d44712e149" class="stentry">the person that created this item (in case of
					create)</td>

			</tr>
<tr class="strow"/>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry"> </td>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry">shortFieldChanges</td>

				<td valign="top" headers="d44712e149" class="stentry">A list of item properties for "short" properties</td>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry">shortFieldChanges.fieldChange</td>

				<td valign="top" headers="d44712e149" class="stentry">A single property</td>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry">shortFieldChanges.fieldChange.changed</td>

				<td valign="top" headers="d44712e149" class="stentry">true if this property was changed</td>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry">shortFieldChanges.fieldChange.newShowValue</td>

				<td valign="top" headers="d44712e149" class="stentry">the new or actual property value</td>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry">shortFieldChanges.fieldChange.oldShowValue</td>

				<td valign="top" headers="d44712e149" class="stentry">the old property value</td>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry">longFieldChanges</td>

				<td valign="top" headers="d44712e149" class="stentry">A list of item properties for "long" properties like
					descriptions and comments</td>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry">longFieldChanges.fieldChange</td>

				<td valign="top" headers="d44712e149" class="stentry">A single property</td>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry">longFieldChanges.fieldChange.changed</td>

				<td valign="top" headers="d44712e149" class="stentry">true if this property was changed</td>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry">longFieldChanges.fieldChange.newShowValue</td>

				<td valign="top" headers="d44712e149" class="stentry">the new or actual property value</td>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry">longFieldChanges.fieldChange.oldShowValue</td>

				<td valign="top" headers="d44712e149" class="stentry">the old property value</td>

			</tr>
<tr class="strow">
				<td valign="top" headers="d44712e146" class="stentry"> </td>

				<td valign="top" headers="d44712e149" class="stentry"> </td>

			</tr>
</table>

		<p class="p">The following table describes how the <var class="keyword varname">changeDetail</var>
			variable is constructed.</p>

		<pre class="pre codeblock">
private String getSubjectSuffix(Integer workItemKey, String synopsis, 
                                String newStateLabel, Locale actualLocale) {
	
	String subjectPatternKey = null; 
	//the last complying flag wins
	if (isAddComment) {
		subjectPatternKey = "item.mail.subject.addComment";
	}
	if (isEditComment) {
		subjectPatternKey = "item.mail.subject.editComment";
	}
	if (isDeleteComment) {
		subjectPatternKey = "item.mail.subject.deleteComment";
	}
	if (isOtherChanged) {
		subjectPatternKey = "item.mail.subject.trail";
	}
	if (isManagerChanged) {
		subjectPatternKey = "item.mail.subject.managerChanged";
	}
	if (isResponsibleChanged) {
		subjectPatternKey = "item.mail.subject.responsibleChanged";
	}	
	if (isDateChanged) {
		subjectPatternKey = "item.mail.subject.dateChange";
	}		
	if (isMove) {
		subjectPatternKey = "item.mail.subject.move";
	}
	if (isStateChanged) {
		subjectPatternKey = "item.mail.subject.stateChange";
	}		
	if (isClose) {
		subjectPatternKey = "item.mail.subject.closed";
	}	
	if (isReopen) {
		subjectPatternKey = "item.mail.subject.reopen";
	}
	if (isCreated || isCopy) {
		subjectPatternKey = "item.mail.subject.new";
	}
	String changeDetail = "";
	Object[] subjectArguments = {workItemKey, //for new 
			synopsis,
			newStateLabel, //for state change
			//newProjectLabel,
	};		
	changeDetail = LocalizeUtil.
                   getParametrizedString(subjectPatternKey, 
	          subjectArguments, actualLocale);
	return changeDetail;
}

</pre>

	</div>

<div class="related-links"/>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../../../Topics/05ForConfigManagers/Chapter5Wrapper.html" title="Customizing Track+"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Customizing Track+</span></a></span>  </div>
</body>
</html>